{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Namespace = exports.Socket = exports.Server = void 0;\nconst http = require(\"http\");\nconst fs_1 = require(\"fs\");\nconst zlib_1 = require(\"zlib\");\nconst accepts = require(\"accepts\");\nconst stream_1 = require(\"stream\");\nconst path = require(\"path\");\nconst engine_io_1 = require(\"engine.io\");\nconst client_1 = require(\"./client\");\nconst events_1 = require(\"events\");\nconst namespace_1 = require(\"./namespace\");\nObject.defineProperty(exports, \"Namespace\", {\n  enumerable: true,\n  get: function () {\n    return namespace_1.Namespace;\n  }\n});\nconst parent_namespace_1 = require(\"./parent-namespace\");\nconst socket_io_adapter_1 = require(\"socket.io-adapter\");\nconst parser = __importStar(require(\"socket.io-parser\"));\nconst debug_1 = __importDefault(require(\"debug\"));\nconst socket_1 = require(\"./socket\");\nObject.defineProperty(exports, \"Socket\", {\n  enumerable: true,\n  get: function () {\n    return socket_1.Socket;\n  }\n});\nconst typed_events_1 = require(\"./typed-events\");\nconst uws_1 = require(\"./uws\");\nconst cors_1 = __importDefault(require(\"cors\"));\nconst debug = (0, debug_1.default)(\"socket.io:server\");\nconst clientVersion = require(\"../package.json\").version;\nconst dotMapRegex = /\\.map/;\n/**\n * Represents a Socket.IO server.\n *\n * @example\n * import { Server } from \"socket.io\";\n *\n * const io = new Server();\n *\n * io.on(\"connection\", (socket) => {\n *   console.log(`socket ${socket.id} connected`);\n *\n *   // send an event to the client\n *   socket.emit(\"foo\", \"bar\");\n *\n *   socket.on(\"foobar\", () => {\n *     // an event was received from the client\n *   });\n *\n *   // upon disconnection\n *   socket.on(\"disconnect\", (reason) => {\n *     console.log(`socket ${socket.id} disconnected due to ${reason}`);\n *   });\n * });\n *\n * io.listen(3000);\n */\nclass Server extends typed_events_1.StrictEventEmitter {\n  constructor(srv, opts = {}) {\n    super();\n    /**\n     * @private\n     */\n    this._nsps = new Map();\n    this.parentNsps = new Map();\n    /**\n     * A subset of the {@link parentNsps} map, only containing {@link ParentNamespace} which are based on a regular\n     * expression.\n     *\n     * @private\n     */\n    this.parentNamespacesFromRegExp = new Map();\n    if (\"object\" === typeof srv && srv instanceof Object && !srv.listen) {\n      opts = srv;\n      srv = undefined;\n    }\n    this.path(opts.path || \"/socket.io\");\n    this.connectTimeout(opts.connectTimeout || 45000);\n    this.serveClient(false !== opts.serveClient);\n    this._parser = opts.parser || parser;\n    this.encoder = new this._parser.Encoder();\n    this.opts = opts;\n    if (opts.connectionStateRecovery) {\n      opts.connectionStateRecovery = Object.assign({\n        maxDisconnectionDuration: 2 * 60 * 1000,\n        skipMiddlewares: true\n      }, opts.connectionStateRecovery);\n      this.adapter(opts.adapter || socket_io_adapter_1.SessionAwareAdapter);\n    } else {\n      this.adapter(opts.adapter || socket_io_adapter_1.Adapter);\n    }\n    opts.cleanupEmptyChildNamespaces = !!opts.cleanupEmptyChildNamespaces;\n    this.sockets = this.of(\"/\");\n    if (srv || typeof srv == \"number\") this.attach(srv);\n    if (this.opts.cors) {\n      this._corsMiddleware = (0, cors_1.default)(this.opts.cors);\n    }\n  }\n  get _opts() {\n    return this.opts;\n  }\n  serveClient(v) {\n    if (!arguments.length) return this._serveClient;\n    this._serveClient = v;\n    return this;\n  }\n  /**\n   * Executes the middleware for an incoming namespace not already created on the server.\n   *\n   * @param name - name of incoming namespace\n   * @param auth - the auth parameters\n   * @param fn - callback\n   *\n   * @private\n   */\n  _checkNamespace(name, auth, fn) {\n    if (this.parentNsps.size === 0) return fn(false);\n    const keysIterator = this.parentNsps.keys();\n    const run = () => {\n      const nextFn = keysIterator.next();\n      if (nextFn.done) {\n        return fn(false);\n      }\n      nextFn.value(name, auth, (err, allow) => {\n        if (err || !allow) {\n          return run();\n        }\n        if (this._nsps.has(name)) {\n          // the namespace was created in the meantime\n          debug(\"dynamic namespace %s already exists\", name);\n          return fn(this._nsps.get(name));\n        }\n        const namespace = this.parentNsps.get(nextFn.value).createChild(name);\n        debug(\"dynamic namespace %s was created\", name);\n        fn(namespace);\n      });\n    };\n    run();\n  }\n  path(v) {\n    if (!arguments.length) return this._path;\n    this._path = v.replace(/\\/$/, \"\");\n    const escapedPath = this._path.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n    this.clientPathRegex = new RegExp(\"^\" + escapedPath + \"/socket\\\\.io(\\\\.msgpack|\\\\.esm)?(\\\\.min)?\\\\.js(\\\\.map)?(?:\\\\?|$)\");\n    return this;\n  }\n  connectTimeout(v) {\n    if (v === undefined) return this._connectTimeout;\n    this._connectTimeout = v;\n    return this;\n  }\n  adapter(v) {\n    if (!arguments.length) return this._adapter;\n    this._adapter = v;\n    for (const nsp of this._nsps.values()) {\n      nsp._initAdapter();\n    }\n    return this;\n  }\n  /**\n   * Attaches socket.io to a server or port.\n   *\n   * @param srv - server or port\n   * @param opts - options passed to engine.io\n   * @return self\n   */\n  listen(srv, opts = {}) {\n    return this.attach(srv, opts);\n  }\n  /**\n   * Attaches socket.io to a server or port.\n   *\n   * @param srv - server or port\n   * @param opts - options passed to engine.io\n   * @return self\n   */\n  attach(srv, opts = {}) {\n    if (\"function\" == typeof srv) {\n      const msg = \"You are trying to attach socket.io to an express \" + \"request handler function. Please pass a http.Server instance.\";\n      throw new Error(msg);\n    }\n    // handle a port as a string\n    if (Number(srv) == srv) {\n      srv = Number(srv);\n    }\n    if (\"number\" == typeof srv) {\n      debug(\"creating http server and binding to %d\", srv);\n      const port = srv;\n      srv = http.createServer((req, res) => {\n        res.writeHead(404);\n        res.end();\n      });\n      srv.listen(port);\n    }\n    // merge the options passed to the Socket.IO server\n    Object.assign(opts, this.opts);\n    // set engine.io path to `/socket.io`\n    opts.path = opts.path || this._path;\n    this.initEngine(srv, opts);\n    return this;\n  }\n  attachApp(app /*: TemplatedApp */, opts = {}) {\n    // merge the options passed to the Socket.IO server\n    Object.assign(opts, this.opts);\n    // set engine.io path to `/socket.io`\n    opts.path = opts.path || this._path;\n    // initialize engine\n    debug(\"creating uWebSockets.js-based engine with opts %j\", opts);\n    const engine = new engine_io_1.uServer(opts);\n    engine.attach(app, opts);\n    // bind to engine events\n    this.bind(engine);\n    if (this._serveClient) {\n      // attach static file serving\n      app.get(`${this._path}/*`, (res, req) => {\n        if (!this.clientPathRegex.test(req.getUrl())) {\n          req.setYield(true);\n          return;\n        }\n        const filename = req.getUrl().replace(this._path, \"\").replace(/\\?.*$/, \"\").replace(/^\\//, \"\");\n        const isMap = dotMapRegex.test(filename);\n        const type = isMap ? \"map\" : \"source\";\n        // Per the standard, ETags must be quoted:\n        // https://tools.ietf.org/html/rfc7232#section-2.3\n        const expectedEtag = '\"' + clientVersion + '\"';\n        const weakEtag = \"W/\" + expectedEtag;\n        const etag = req.getHeader(\"if-none-match\");\n        if (etag) {\n          if (expectedEtag === etag || weakEtag === etag) {\n            debug(\"serve client %s 304\", type);\n            res.writeStatus(\"304 Not Modified\");\n            res.end();\n            return;\n          }\n        }\n        debug(\"serve client %s\", type);\n        res.writeHeader(\"cache-control\", \"public, max-age=0\");\n        res.writeHeader(\"content-type\", \"application/\" + (isMap ? \"json\" : \"javascript\") + \"; charset=utf-8\");\n        res.writeHeader(\"etag\", expectedEtag);\n        const filepath = path.join(__dirname, \"../client-dist/\", filename);\n        (0, uws_1.serveFile)(res, filepath);\n      });\n    }\n    (0, uws_1.patchAdapter)(app);\n  }\n  /**\n   * Initialize engine\n   *\n   * @param srv - the server to attach to\n   * @param opts - options passed to engine.io\n   * @private\n   */\n  initEngine(srv, opts) {\n    // initialize engine\n    debug(\"creating engine.io instance with opts %j\", opts);\n    this.eio = (0, engine_io_1.attach)(srv, opts);\n    // attach static file serving\n    if (this._serveClient) this.attachServe(srv);\n    // Export http server\n    this.httpServer = srv;\n    // bind to engine events\n    this.bind(this.eio);\n  }\n  /**\n   * Attaches the static file serving.\n   *\n   * @param srv http server\n   * @private\n   */\n  attachServe(srv) {\n    debug(\"attaching client serving req handler\");\n    const evs = srv.listeners(\"request\").slice(0);\n    srv.removeAllListeners(\"request\");\n    srv.on(\"request\", (req, res) => {\n      if (this.clientPathRegex.test(req.url)) {\n        if (this._corsMiddleware) {\n          this._corsMiddleware(req, res, () => {\n            this.serve(req, res);\n          });\n        } else {\n          this.serve(req, res);\n        }\n      } else {\n        for (let i = 0; i < evs.length; i++) {\n          evs[i].call(srv, req, res);\n        }\n      }\n    });\n  }\n  /**\n   * Handles a request serving of client source and map\n   *\n   * @param req\n   * @param res\n   * @private\n   */\n  serve(req, res) {\n    const filename = req.url.replace(this._path, \"\").replace(/\\?.*$/, \"\");\n    const isMap = dotMapRegex.test(filename);\n    const type = isMap ? \"map\" : \"source\";\n    // Per the standard, ETags must be quoted:\n    // https://tools.ietf.org/html/rfc7232#section-2.3\n    const expectedEtag = '\"' + clientVersion + '\"';\n    const weakEtag = \"W/\" + expectedEtag;\n    const etag = req.headers[\"if-none-match\"];\n    if (etag) {\n      if (expectedEtag === etag || weakEtag === etag) {\n        debug(\"serve client %s 304\", type);\n        res.writeHead(304);\n        res.end();\n        return;\n      }\n    }\n    debug(\"serve client %s\", type);\n    res.setHeader(\"Cache-Control\", \"public, max-age=0\");\n    res.setHeader(\"Content-Type\", \"application/\" + (isMap ? \"json\" : \"javascript\") + \"; charset=utf-8\");\n    res.setHeader(\"ETag\", expectedEtag);\n    Server.sendFile(filename, req, res);\n  }\n  /**\n   * @param filename\n   * @param req\n   * @param res\n   * @private\n   */\n  static sendFile(filename, req, res) {\n    const readStream = (0, fs_1.createReadStream)(path.join(__dirname, \"../client-dist/\", filename));\n    const encoding = accepts(req).encodings([\"br\", \"gzip\", \"deflate\"]);\n    const onError = err => {\n      if (err) {\n        res.end();\n      }\n    };\n    switch (encoding) {\n      case \"br\":\n        res.writeHead(200, {\n          \"content-encoding\": \"br\"\n        });\n        readStream.pipe((0, zlib_1.createBrotliCompress)()).pipe(res);\n        (0, stream_1.pipeline)(readStream, (0, zlib_1.createBrotliCompress)(), res, onError);\n        break;\n      case \"gzip\":\n        res.writeHead(200, {\n          \"content-encoding\": \"gzip\"\n        });\n        (0, stream_1.pipeline)(readStream, (0, zlib_1.createGzip)(), res, onError);\n        break;\n      case \"deflate\":\n        res.writeHead(200, {\n          \"content-encoding\": \"deflate\"\n        });\n        (0, stream_1.pipeline)(readStream, (0, zlib_1.createDeflate)(), res, onError);\n        break;\n      default:\n        res.writeHead(200);\n        (0, stream_1.pipeline)(readStream, res, onError);\n    }\n  }\n  /**\n   * Binds socket.io to an engine.io instance.\n   *\n   * @param engine engine.io (or compatible) server\n   * @return self\n   */\n  bind(engine) {\n    this.engine = engine;\n    this.engine.on(\"connection\", this.onconnection.bind(this));\n    return this;\n  }\n  /**\n   * Called with each incoming transport connection.\n   *\n   * @param {engine.Socket} conn\n   * @return self\n   * @private\n   */\n  onconnection(conn) {\n    debug(\"incoming connection with id %s\", conn.id);\n    const client = new client_1.Client(this, conn);\n    if (conn.protocol === 3) {\n      // @ts-ignore\n      client.connect(\"/\");\n    }\n    return this;\n  }\n  /**\n   * Looks up a namespace.\n   *\n   * @example\n   * // with a simple string\n   * const myNamespace = io.of(\"/my-namespace\");\n   *\n   * // with a regex\n   * const dynamicNsp = io.of(/^\\/dynamic-\\d+$/).on(\"connection\", (socket) => {\n   *   const namespace = socket.nsp; // newNamespace.name === \"/dynamic-101\"\n   *\n   *   // broadcast to all clients in the given sub-namespace\n   *   namespace.emit(\"hello\");\n   * });\n   *\n   * @param name - nsp name\n   * @param fn optional, nsp `connection` ev handler\n   */\n  of(name, fn) {\n    if (typeof name === \"function\" || name instanceof RegExp) {\n      const parentNsp = new parent_namespace_1.ParentNamespace(this);\n      debug(\"initializing parent namespace %s\", parentNsp.name);\n      if (typeof name === \"function\") {\n        this.parentNsps.set(name, parentNsp);\n      } else {\n        this.parentNsps.set((nsp, conn, next) => next(null, name.test(nsp)), parentNsp);\n        this.parentNamespacesFromRegExp.set(name, parentNsp);\n      }\n      if (fn) {\n        // @ts-ignore\n        parentNsp.on(\"connect\", fn);\n      }\n      return parentNsp;\n    }\n    if (String(name)[0] !== \"/\") name = \"/\" + name;\n    let nsp = this._nsps.get(name);\n    if (!nsp) {\n      for (const [regex, parentNamespace] of this.parentNamespacesFromRegExp) {\n        if (regex.test(name)) {\n          debug(\"attaching namespace %s to parent namespace %s\", name, regex);\n          return parentNamespace.createChild(name);\n        }\n      }\n      debug(\"initializing namespace %s\", name);\n      nsp = new namespace_1.Namespace(this, name);\n      this._nsps.set(name, nsp);\n      if (name !== \"/\") {\n        // @ts-ignore\n        this.sockets.emitReserved(\"new_namespace\", nsp);\n      }\n    }\n    if (fn) nsp.on(\"connect\", fn);\n    return nsp;\n  }\n  /**\n   * Closes server connection\n   *\n   * @param [fn] optional, called as `fn([err])` on error OR all conns closed\n   */\n  close(fn) {\n    for (const socket of this.sockets.sockets.values()) {\n      socket._onclose(\"server shutting down\");\n    }\n    this.engine.close();\n    // restore the Adapter prototype\n    (0, uws_1.restoreAdapter)();\n    if (this.httpServer) {\n      this.httpServer.close(fn);\n    } else {\n      fn && fn();\n    }\n  }\n  /**\n   * Registers a middleware, which is a function that gets executed for every incoming {@link Socket}.\n   *\n   * @example\n   * io.use((socket, next) => {\n   *   // ...\n   *   next();\n   * });\n   *\n   * @param fn - the middleware function\n   */\n  use(fn) {\n    this.sockets.use(fn);\n    return this;\n  }\n  /**\n   * Targets a room when emitting.\n   *\n   * @example\n   * // the “foo” event will be broadcast to all connected clients in the “room-101” room\n   * io.to(\"room-101\").emit(\"foo\", \"bar\");\n   *\n   * // with an array of rooms (a client will be notified at most once)\n   * io.to([\"room-101\", \"room-102\"]).emit(\"foo\", \"bar\");\n   *\n   * // with multiple chained calls\n   * io.to(\"room-101\").to(\"room-102\").emit(\"foo\", \"bar\");\n   *\n   * @param room - a room, or an array of rooms\n   * @return a new {@link BroadcastOperator} instance for chaining\n   */\n  to(room) {\n    return this.sockets.to(room);\n  }\n  /**\n   * Targets a room when emitting. Similar to `to()`, but might feel clearer in some cases:\n   *\n   * @example\n   * // disconnect all clients in the \"room-101\" room\n   * io.in(\"room-101\").disconnectSockets();\n   *\n   * @param room - a room, or an array of rooms\n   * @return a new {@link BroadcastOperator} instance for chaining\n   */\n  in(room) {\n    return this.sockets.in(room);\n  }\n  /**\n   * Excludes a room when emitting.\n   *\n   * @example\n   * // the \"foo\" event will be broadcast to all connected clients, except the ones that are in the \"room-101\" room\n   * io.except(\"room-101\").emit(\"foo\", \"bar\");\n   *\n   * // with an array of rooms\n   * io.except([\"room-101\", \"room-102\"]).emit(\"foo\", \"bar\");\n   *\n   * // with multiple chained calls\n   * io.except(\"room-101\").except(\"room-102\").emit(\"foo\", \"bar\");\n   *\n   * @param room - a room, or an array of rooms\n   * @return a new {@link BroadcastOperator} instance for chaining\n   */\n  except(room) {\n    return this.sockets.except(room);\n  }\n  /**\n   * Emits an event and waits for an acknowledgement from all clients.\n   *\n   * @example\n   * try {\n   *   const responses = await io.timeout(1000).emitWithAck(\"some-event\");\n   *   console.log(responses); // one response per client\n   * } catch (e) {\n   *   // some clients did not acknowledge the event in the given delay\n   * }\n   *\n   * @return a Promise that will be fulfilled when all clients have acknowledged the event\n   */\n  emitWithAck(ev, ...args) {\n    return this.sockets.emitWithAck(ev, ...args);\n  }\n  /**\n   * Sends a `message` event to all clients.\n   *\n   * This method mimics the WebSocket.send() method.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n   *\n   * @example\n   * io.send(\"hello\");\n   *\n   * // this is equivalent to\n   * io.emit(\"message\", \"hello\");\n   *\n   * @return self\n   */\n  send(...args) {\n    this.sockets.emit(\"message\", ...args);\n    return this;\n  }\n  /**\n   * Sends a `message` event to all clients. Alias of {@link send}.\n   *\n   * @return self\n   */\n  write(...args) {\n    this.sockets.emit(\"message\", ...args);\n    return this;\n  }\n  /**\n   * Sends a message to the other Socket.IO servers of the cluster.\n   *\n   * @example\n   * io.serverSideEmit(\"hello\", \"world\");\n   *\n   * io.on(\"hello\", (arg1) => {\n   *   console.log(arg1); // prints \"world\"\n   * });\n   *\n   * // acknowledgements (without binary content) are supported too:\n   * io.serverSideEmit(\"ping\", (err, responses) => {\n   *  if (err) {\n   *     // some servers did not acknowledge the event in the given delay\n   *   } else {\n   *     console.log(responses); // one response per server (except the current one)\n   *   }\n   * });\n   *\n   * io.on(\"ping\", (cb) => {\n   *   cb(\"pong\");\n   * });\n   *\n   * @param ev - the event name\n   * @param args - an array of arguments, which may include an acknowledgement callback at the end\n   */\n  serverSideEmit(ev, ...args) {\n    return this.sockets.serverSideEmit(ev, ...args);\n  }\n  /**\n   * Sends a message and expect an acknowledgement from the other Socket.IO servers of the cluster.\n   *\n   * @example\n   * try {\n   *   const responses = await io.serverSideEmitWithAck(\"ping\");\n   *   console.log(responses); // one response per server (except the current one)\n   * } catch (e) {\n   *   // some servers did not acknowledge the event in the given delay\n   * }\n   *\n   * @param ev - the event name\n   * @param args - an array of arguments\n   *\n   * @return a Promise that will be fulfilled when all servers have acknowledged the event\n   */\n  serverSideEmitWithAck(ev, ...args) {\n    return this.sockets.serverSideEmitWithAck(ev, ...args);\n  }\n  /**\n   * Gets a list of socket ids.\n   *\n   * @deprecated this method will be removed in the next major release, please use {@link Server#serverSideEmit} or\n   * {@link Server#fetchSockets} instead.\n   */\n  allSockets() {\n    return this.sockets.allSockets();\n  }\n  /**\n   * Sets the compress flag.\n   *\n   * @example\n   * io.compress(false).emit(\"hello\");\n   *\n   * @param compress - if `true`, compresses the sending data\n   * @return a new {@link BroadcastOperator} instance for chaining\n   */\n  compress(compress) {\n    return this.sockets.compress(compress);\n  }\n  /**\n   * Sets a modifier for a subsequent event emission that the event data may be lost if the client is not ready to\n   * receive messages (because of network slowness or other issues, or because they’re connected through long polling\n   * and is in the middle of a request-response cycle).\n   *\n   * @example\n   * io.volatile.emit(\"hello\"); // the clients may or may not receive it\n   *\n   * @return a new {@link BroadcastOperator} instance for chaining\n   */\n  get volatile() {\n    return this.sockets.volatile;\n  }\n  /**\n   * Sets a modifier for a subsequent event emission that the event data will only be broadcast to the current node.\n   *\n   * @example\n   * // the “foo” event will be broadcast to all connected clients on this node\n   * io.local.emit(\"foo\", \"bar\");\n   *\n   * @return a new {@link BroadcastOperator} instance for chaining\n   */\n  get local() {\n    return this.sockets.local;\n  }\n  /**\n   * Adds a timeout in milliseconds for the next operation.\n   *\n   * @example\n   * io.timeout(1000).emit(\"some-event\", (err, responses) => {\n   *   if (err) {\n   *     // some clients did not acknowledge the event in the given delay\n   *   } else {\n   *     console.log(responses); // one response per client\n   *   }\n   * });\n   *\n   * @param timeout\n   */\n  timeout(timeout) {\n    return this.sockets.timeout(timeout);\n  }\n  /**\n   * Returns the matching socket instances.\n   *\n   * Note: this method also works within a cluster of multiple Socket.IO servers, with a compatible {@link Adapter}.\n   *\n   * @example\n   * // return all Socket instances\n   * const sockets = await io.fetchSockets();\n   *\n   * // return all Socket instances in the \"room1\" room\n   * const sockets = await io.in(\"room1\").fetchSockets();\n   *\n   * for (const socket of sockets) {\n   *   console.log(socket.id);\n   *   console.log(socket.handshake);\n   *   console.log(socket.rooms);\n   *   console.log(socket.data);\n   *\n   *   socket.emit(\"hello\");\n   *   socket.join(\"room1\");\n   *   socket.leave(\"room2\");\n   *   socket.disconnect();\n   * }\n   */\n  fetchSockets() {\n    return this.sockets.fetchSockets();\n  }\n  /**\n   * Makes the matching socket instances join the specified rooms.\n   *\n   * Note: this method also works within a cluster of multiple Socket.IO servers, with a compatible {@link Adapter}.\n   *\n   * @example\n   *\n   * // make all socket instances join the \"room1\" room\n   * io.socketsJoin(\"room1\");\n   *\n   * // make all socket instances in the \"room1\" room join the \"room2\" and \"room3\" rooms\n   * io.in(\"room1\").socketsJoin([\"room2\", \"room3\"]);\n   *\n   * @param room - a room, or an array of rooms\n   */\n  socketsJoin(room) {\n    return this.sockets.socketsJoin(room);\n  }\n  /**\n   * Makes the matching socket instances leave the specified rooms.\n   *\n   * Note: this method also works within a cluster of multiple Socket.IO servers, with a compatible {@link Adapter}.\n   *\n   * @example\n   * // make all socket instances leave the \"room1\" room\n   * io.socketsLeave(\"room1\");\n   *\n   * // make all socket instances in the \"room1\" room leave the \"room2\" and \"room3\" rooms\n   * io.in(\"room1\").socketsLeave([\"room2\", \"room3\"]);\n   *\n   * @param room - a room, or an array of rooms\n   */\n  socketsLeave(room) {\n    return this.sockets.socketsLeave(room);\n  }\n  /**\n   * Makes the matching socket instances disconnect.\n   *\n   * Note: this method also works within a cluster of multiple Socket.IO servers, with a compatible {@link Adapter}.\n   *\n   * @example\n   * // make all socket instances disconnect (the connections might be kept alive for other namespaces)\n   * io.disconnectSockets();\n   *\n   * // make all socket instances in the \"room1\" room disconnect and close the underlying connections\n   * io.in(\"room1\").disconnectSockets(true);\n   *\n   * @param close - whether to close the underlying connection\n   */\n  disconnectSockets(close = false) {\n    return this.sockets.disconnectSockets(close);\n  }\n}\nexports.Server = Server;\n/**\n * Expose main namespace (/).\n */\nconst emitterMethods = Object.keys(events_1.EventEmitter.prototype).filter(function (key) {\n  return typeof events_1.EventEmitter.prototype[key] === \"function\";\n});\nemitterMethods.forEach(function (fn) {\n  Server.prototype[fn] = function () {\n    return this.sockets[fn].apply(this.sockets, arguments);\n  };\n});\nmodule.exports = (srv, opts) => new Server(srv, opts);\nmodule.exports.Server = Server;\nmodule.exports.Namespace = namespace_1.Namespace;\nmodule.exports.Socket = socket_1.Socket;\nvar socket_2 = require(\"./socket\");","map":{"version":3,"names":["__createBinding","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","__importDefault","exports","Namespace","Socket","Server","http","require","fs_1","zlib_1","accepts","stream_1","path","engine_io_1","client_1","events_1","namespace_1","parent_namespace_1","socket_io_adapter_1","parser","debug_1","socket_1","typed_events_1","uws_1","cors_1","debug","default","clientVersion","version","dotMapRegex","StrictEventEmitter","constructor","srv","opts","_nsps","Map","parentNsps","parentNamespacesFromRegExp","listen","connectTimeout","serveClient","_parser","encoder","Encoder","connectionStateRecovery","assign","maxDisconnectionDuration","skipMiddlewares","adapter","SessionAwareAdapter","Adapter","cleanupEmptyChildNamespaces","sockets","of","attach","cors","_corsMiddleware","_opts","arguments","length","_serveClient","_checkNamespace","name","auth","fn","size","keysIterator","keys","run","nextFn","next","done","err","allow","has","namespace","createChild","_path","replace","escapedPath","clientPathRegex","RegExp","_connectTimeout","_adapter","nsp","values","_initAdapter","msg","Error","Number","port","createServer","req","res","writeHead","end","initEngine","attachApp","app","engine","uServer","bind","test","getUrl","setYield","filename","isMap","type","expectedEtag","weakEtag","etag","getHeader","writeStatus","writeHeader","filepath","join","__dirname","serveFile","patchAdapter","eio","attachServe","httpServer","evs","listeners","slice","removeAllListeners","on","url","serve","i","headers","setHeader","sendFile","readStream","createReadStream","encoding","encodings","onError","pipe","createBrotliCompress","pipeline","createGzip","createDeflate","onconnection","conn","id","client","Client","protocol","connect","parentNsp","ParentNamespace","set","String","regex","parentNamespace","emitReserved","close","socket","_onclose","restoreAdapter","use","to","room","in","except","emitWithAck","ev","args","send","emit","write","serverSideEmit","serverSideEmitWithAck","allSockets","compress","volatile","local","timeout","fetchSockets","socketsJoin","socketsLeave","disconnectSockets","emitterMethods","EventEmitter","filter","key","forEach","apply","module","socket_2"],"sources":["C:/Users/sanjeevi/Desktop/chatapp/chatapp_frontend/node_modules/socket.io/dist/index.js"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Namespace = exports.Socket = exports.Server = void 0;\nconst http = require(\"http\");\nconst fs_1 = require(\"fs\");\nconst zlib_1 = require(\"zlib\");\nconst accepts = require(\"accepts\");\nconst stream_1 = require(\"stream\");\nconst path = require(\"path\");\nconst engine_io_1 = require(\"engine.io\");\nconst client_1 = require(\"./client\");\nconst events_1 = require(\"events\");\nconst namespace_1 = require(\"./namespace\");\nObject.defineProperty(exports, \"Namespace\", { enumerable: true, get: function () { return namespace_1.Namespace; } });\nconst parent_namespace_1 = require(\"./parent-namespace\");\nconst socket_io_adapter_1 = require(\"socket.io-adapter\");\nconst parser = __importStar(require(\"socket.io-parser\"));\nconst debug_1 = __importDefault(require(\"debug\"));\nconst socket_1 = require(\"./socket\");\nObject.defineProperty(exports, \"Socket\", { enumerable: true, get: function () { return socket_1.Socket; } });\nconst typed_events_1 = require(\"./typed-events\");\nconst uws_1 = require(\"./uws\");\nconst cors_1 = __importDefault(require(\"cors\"));\nconst debug = (0, debug_1.default)(\"socket.io:server\");\nconst clientVersion = require(\"../package.json\").version;\nconst dotMapRegex = /\\.map/;\n/**\n * Represents a Socket.IO server.\n *\n * @example\n * import { Server } from \"socket.io\";\n *\n * const io = new Server();\n *\n * io.on(\"connection\", (socket) => {\n *   console.log(`socket ${socket.id} connected`);\n *\n *   // send an event to the client\n *   socket.emit(\"foo\", \"bar\");\n *\n *   socket.on(\"foobar\", () => {\n *     // an event was received from the client\n *   });\n *\n *   // upon disconnection\n *   socket.on(\"disconnect\", (reason) => {\n *     console.log(`socket ${socket.id} disconnected due to ${reason}`);\n *   });\n * });\n *\n * io.listen(3000);\n */\nclass Server extends typed_events_1.StrictEventEmitter {\n    constructor(srv, opts = {}) {\n        super();\n        /**\n         * @private\n         */\n        this._nsps = new Map();\n        this.parentNsps = new Map();\n        /**\n         * A subset of the {@link parentNsps} map, only containing {@link ParentNamespace} which are based on a regular\n         * expression.\n         *\n         * @private\n         */\n        this.parentNamespacesFromRegExp = new Map();\n        if (\"object\" === typeof srv &&\n            srv instanceof Object &&\n            !srv.listen) {\n            opts = srv;\n            srv = undefined;\n        }\n        this.path(opts.path || \"/socket.io\");\n        this.connectTimeout(opts.connectTimeout || 45000);\n        this.serveClient(false !== opts.serveClient);\n        this._parser = opts.parser || parser;\n        this.encoder = new this._parser.Encoder();\n        this.opts = opts;\n        if (opts.connectionStateRecovery) {\n            opts.connectionStateRecovery = Object.assign({\n                maxDisconnectionDuration: 2 * 60 * 1000,\n                skipMiddlewares: true,\n            }, opts.connectionStateRecovery);\n            this.adapter(opts.adapter || socket_io_adapter_1.SessionAwareAdapter);\n        }\n        else {\n            this.adapter(opts.adapter || socket_io_adapter_1.Adapter);\n        }\n        opts.cleanupEmptyChildNamespaces = !!opts.cleanupEmptyChildNamespaces;\n        this.sockets = this.of(\"/\");\n        if (srv || typeof srv == \"number\")\n            this.attach(srv);\n        if (this.opts.cors) {\n            this._corsMiddleware = (0, cors_1.default)(this.opts.cors);\n        }\n    }\n    get _opts() {\n        return this.opts;\n    }\n    serveClient(v) {\n        if (!arguments.length)\n            return this._serveClient;\n        this._serveClient = v;\n        return this;\n    }\n    /**\n     * Executes the middleware for an incoming namespace not already created on the server.\n     *\n     * @param name - name of incoming namespace\n     * @param auth - the auth parameters\n     * @param fn - callback\n     *\n     * @private\n     */\n    _checkNamespace(name, auth, fn) {\n        if (this.parentNsps.size === 0)\n            return fn(false);\n        const keysIterator = this.parentNsps.keys();\n        const run = () => {\n            const nextFn = keysIterator.next();\n            if (nextFn.done) {\n                return fn(false);\n            }\n            nextFn.value(name, auth, (err, allow) => {\n                if (err || !allow) {\n                    return run();\n                }\n                if (this._nsps.has(name)) {\n                    // the namespace was created in the meantime\n                    debug(\"dynamic namespace %s already exists\", name);\n                    return fn(this._nsps.get(name));\n                }\n                const namespace = this.parentNsps.get(nextFn.value).createChild(name);\n                debug(\"dynamic namespace %s was created\", name);\n                fn(namespace);\n            });\n        };\n        run();\n    }\n    path(v) {\n        if (!arguments.length)\n            return this._path;\n        this._path = v.replace(/\\/$/, \"\");\n        const escapedPath = this._path.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n        this.clientPathRegex = new RegExp(\"^\" +\n            escapedPath +\n            \"/socket\\\\.io(\\\\.msgpack|\\\\.esm)?(\\\\.min)?\\\\.js(\\\\.map)?(?:\\\\?|$)\");\n        return this;\n    }\n    connectTimeout(v) {\n        if (v === undefined)\n            return this._connectTimeout;\n        this._connectTimeout = v;\n        return this;\n    }\n    adapter(v) {\n        if (!arguments.length)\n            return this._adapter;\n        this._adapter = v;\n        for (const nsp of this._nsps.values()) {\n            nsp._initAdapter();\n        }\n        return this;\n    }\n    /**\n     * Attaches socket.io to a server or port.\n     *\n     * @param srv - server or port\n     * @param opts - options passed to engine.io\n     * @return self\n     */\n    listen(srv, opts = {}) {\n        return this.attach(srv, opts);\n    }\n    /**\n     * Attaches socket.io to a server or port.\n     *\n     * @param srv - server or port\n     * @param opts - options passed to engine.io\n     * @return self\n     */\n    attach(srv, opts = {}) {\n        if (\"function\" == typeof srv) {\n            const msg = \"You are trying to attach socket.io to an express \" +\n                \"request handler function. Please pass a http.Server instance.\";\n            throw new Error(msg);\n        }\n        // handle a port as a string\n        if (Number(srv) == srv) {\n            srv = Number(srv);\n        }\n        if (\"number\" == typeof srv) {\n            debug(\"creating http server and binding to %d\", srv);\n            const port = srv;\n            srv = http.createServer((req, res) => {\n                res.writeHead(404);\n                res.end();\n            });\n            srv.listen(port);\n        }\n        // merge the options passed to the Socket.IO server\n        Object.assign(opts, this.opts);\n        // set engine.io path to `/socket.io`\n        opts.path = opts.path || this._path;\n        this.initEngine(srv, opts);\n        return this;\n    }\n    attachApp(app /*: TemplatedApp */, opts = {}) {\n        // merge the options passed to the Socket.IO server\n        Object.assign(opts, this.opts);\n        // set engine.io path to `/socket.io`\n        opts.path = opts.path || this._path;\n        // initialize engine\n        debug(\"creating uWebSockets.js-based engine with opts %j\", opts);\n        const engine = new engine_io_1.uServer(opts);\n        engine.attach(app, opts);\n        // bind to engine events\n        this.bind(engine);\n        if (this._serveClient) {\n            // attach static file serving\n            app.get(`${this._path}/*`, (res, req) => {\n                if (!this.clientPathRegex.test(req.getUrl())) {\n                    req.setYield(true);\n                    return;\n                }\n                const filename = req\n                    .getUrl()\n                    .replace(this._path, \"\")\n                    .replace(/\\?.*$/, \"\")\n                    .replace(/^\\//, \"\");\n                const isMap = dotMapRegex.test(filename);\n                const type = isMap ? \"map\" : \"source\";\n                // Per the standard, ETags must be quoted:\n                // https://tools.ietf.org/html/rfc7232#section-2.3\n                const expectedEtag = '\"' + clientVersion + '\"';\n                const weakEtag = \"W/\" + expectedEtag;\n                const etag = req.getHeader(\"if-none-match\");\n                if (etag) {\n                    if (expectedEtag === etag || weakEtag === etag) {\n                        debug(\"serve client %s 304\", type);\n                        res.writeStatus(\"304 Not Modified\");\n                        res.end();\n                        return;\n                    }\n                }\n                debug(\"serve client %s\", type);\n                res.writeHeader(\"cache-control\", \"public, max-age=0\");\n                res.writeHeader(\"content-type\", \"application/\" + (isMap ? \"json\" : \"javascript\") + \"; charset=utf-8\");\n                res.writeHeader(\"etag\", expectedEtag);\n                const filepath = path.join(__dirname, \"../client-dist/\", filename);\n                (0, uws_1.serveFile)(res, filepath);\n            });\n        }\n        (0, uws_1.patchAdapter)(app);\n    }\n    /**\n     * Initialize engine\n     *\n     * @param srv - the server to attach to\n     * @param opts - options passed to engine.io\n     * @private\n     */\n    initEngine(srv, opts) {\n        // initialize engine\n        debug(\"creating engine.io instance with opts %j\", opts);\n        this.eio = (0, engine_io_1.attach)(srv, opts);\n        // attach static file serving\n        if (this._serveClient)\n            this.attachServe(srv);\n        // Export http server\n        this.httpServer = srv;\n        // bind to engine events\n        this.bind(this.eio);\n    }\n    /**\n     * Attaches the static file serving.\n     *\n     * @param srv http server\n     * @private\n     */\n    attachServe(srv) {\n        debug(\"attaching client serving req handler\");\n        const evs = srv.listeners(\"request\").slice(0);\n        srv.removeAllListeners(\"request\");\n        srv.on(\"request\", (req, res) => {\n            if (this.clientPathRegex.test(req.url)) {\n                if (this._corsMiddleware) {\n                    this._corsMiddleware(req, res, () => {\n                        this.serve(req, res);\n                    });\n                }\n                else {\n                    this.serve(req, res);\n                }\n            }\n            else {\n                for (let i = 0; i < evs.length; i++) {\n                    evs[i].call(srv, req, res);\n                }\n            }\n        });\n    }\n    /**\n     * Handles a request serving of client source and map\n     *\n     * @param req\n     * @param res\n     * @private\n     */\n    serve(req, res) {\n        const filename = req.url.replace(this._path, \"\").replace(/\\?.*$/, \"\");\n        const isMap = dotMapRegex.test(filename);\n        const type = isMap ? \"map\" : \"source\";\n        // Per the standard, ETags must be quoted:\n        // https://tools.ietf.org/html/rfc7232#section-2.3\n        const expectedEtag = '\"' + clientVersion + '\"';\n        const weakEtag = \"W/\" + expectedEtag;\n        const etag = req.headers[\"if-none-match\"];\n        if (etag) {\n            if (expectedEtag === etag || weakEtag === etag) {\n                debug(\"serve client %s 304\", type);\n                res.writeHead(304);\n                res.end();\n                return;\n            }\n        }\n        debug(\"serve client %s\", type);\n        res.setHeader(\"Cache-Control\", \"public, max-age=0\");\n        res.setHeader(\"Content-Type\", \"application/\" + (isMap ? \"json\" : \"javascript\") + \"; charset=utf-8\");\n        res.setHeader(\"ETag\", expectedEtag);\n        Server.sendFile(filename, req, res);\n    }\n    /**\n     * @param filename\n     * @param req\n     * @param res\n     * @private\n     */\n    static sendFile(filename, req, res) {\n        const readStream = (0, fs_1.createReadStream)(path.join(__dirname, \"../client-dist/\", filename));\n        const encoding = accepts(req).encodings([\"br\", \"gzip\", \"deflate\"]);\n        const onError = (err) => {\n            if (err) {\n                res.end();\n            }\n        };\n        switch (encoding) {\n            case \"br\":\n                res.writeHead(200, { \"content-encoding\": \"br\" });\n                readStream.pipe((0, zlib_1.createBrotliCompress)()).pipe(res);\n                (0, stream_1.pipeline)(readStream, (0, zlib_1.createBrotliCompress)(), res, onError);\n                break;\n            case \"gzip\":\n                res.writeHead(200, { \"content-encoding\": \"gzip\" });\n                (0, stream_1.pipeline)(readStream, (0, zlib_1.createGzip)(), res, onError);\n                break;\n            case \"deflate\":\n                res.writeHead(200, { \"content-encoding\": \"deflate\" });\n                (0, stream_1.pipeline)(readStream, (0, zlib_1.createDeflate)(), res, onError);\n                break;\n            default:\n                res.writeHead(200);\n                (0, stream_1.pipeline)(readStream, res, onError);\n        }\n    }\n    /**\n     * Binds socket.io to an engine.io instance.\n     *\n     * @param engine engine.io (or compatible) server\n     * @return self\n     */\n    bind(engine) {\n        this.engine = engine;\n        this.engine.on(\"connection\", this.onconnection.bind(this));\n        return this;\n    }\n    /**\n     * Called with each incoming transport connection.\n     *\n     * @param {engine.Socket} conn\n     * @return self\n     * @private\n     */\n    onconnection(conn) {\n        debug(\"incoming connection with id %s\", conn.id);\n        const client = new client_1.Client(this, conn);\n        if (conn.protocol === 3) {\n            // @ts-ignore\n            client.connect(\"/\");\n        }\n        return this;\n    }\n    /**\n     * Looks up a namespace.\n     *\n     * @example\n     * // with a simple string\n     * const myNamespace = io.of(\"/my-namespace\");\n     *\n     * // with a regex\n     * const dynamicNsp = io.of(/^\\/dynamic-\\d+$/).on(\"connection\", (socket) => {\n     *   const namespace = socket.nsp; // newNamespace.name === \"/dynamic-101\"\n     *\n     *   // broadcast to all clients in the given sub-namespace\n     *   namespace.emit(\"hello\");\n     * });\n     *\n     * @param name - nsp name\n     * @param fn optional, nsp `connection` ev handler\n     */\n    of(name, fn) {\n        if (typeof name === \"function\" || name instanceof RegExp) {\n            const parentNsp = new parent_namespace_1.ParentNamespace(this);\n            debug(\"initializing parent namespace %s\", parentNsp.name);\n            if (typeof name === \"function\") {\n                this.parentNsps.set(name, parentNsp);\n            }\n            else {\n                this.parentNsps.set((nsp, conn, next) => next(null, name.test(nsp)), parentNsp);\n                this.parentNamespacesFromRegExp.set(name, parentNsp);\n            }\n            if (fn) {\n                // @ts-ignore\n                parentNsp.on(\"connect\", fn);\n            }\n            return parentNsp;\n        }\n        if (String(name)[0] !== \"/\")\n            name = \"/\" + name;\n        let nsp = this._nsps.get(name);\n        if (!nsp) {\n            for (const [regex, parentNamespace] of this.parentNamespacesFromRegExp) {\n                if (regex.test(name)) {\n                    debug(\"attaching namespace %s to parent namespace %s\", name, regex);\n                    return parentNamespace.createChild(name);\n                }\n            }\n            debug(\"initializing namespace %s\", name);\n            nsp = new namespace_1.Namespace(this, name);\n            this._nsps.set(name, nsp);\n            if (name !== \"/\") {\n                // @ts-ignore\n                this.sockets.emitReserved(\"new_namespace\", nsp);\n            }\n        }\n        if (fn)\n            nsp.on(\"connect\", fn);\n        return nsp;\n    }\n    /**\n     * Closes server connection\n     *\n     * @param [fn] optional, called as `fn([err])` on error OR all conns closed\n     */\n    close(fn) {\n        for (const socket of this.sockets.sockets.values()) {\n            socket._onclose(\"server shutting down\");\n        }\n        this.engine.close();\n        // restore the Adapter prototype\n        (0, uws_1.restoreAdapter)();\n        if (this.httpServer) {\n            this.httpServer.close(fn);\n        }\n        else {\n            fn && fn();\n        }\n    }\n    /**\n     * Registers a middleware, which is a function that gets executed for every incoming {@link Socket}.\n     *\n     * @example\n     * io.use((socket, next) => {\n     *   // ...\n     *   next();\n     * });\n     *\n     * @param fn - the middleware function\n     */\n    use(fn) {\n        this.sockets.use(fn);\n        return this;\n    }\n    /**\n     * Targets a room when emitting.\n     *\n     * @example\n     * // the “foo” event will be broadcast to all connected clients in the “room-101” room\n     * io.to(\"room-101\").emit(\"foo\", \"bar\");\n     *\n     * // with an array of rooms (a client will be notified at most once)\n     * io.to([\"room-101\", \"room-102\"]).emit(\"foo\", \"bar\");\n     *\n     * // with multiple chained calls\n     * io.to(\"room-101\").to(\"room-102\").emit(\"foo\", \"bar\");\n     *\n     * @param room - a room, or an array of rooms\n     * @return a new {@link BroadcastOperator} instance for chaining\n     */\n    to(room) {\n        return this.sockets.to(room);\n    }\n    /**\n     * Targets a room when emitting. Similar to `to()`, but might feel clearer in some cases:\n     *\n     * @example\n     * // disconnect all clients in the \"room-101\" room\n     * io.in(\"room-101\").disconnectSockets();\n     *\n     * @param room - a room, or an array of rooms\n     * @return a new {@link BroadcastOperator} instance for chaining\n     */\n    in(room) {\n        return this.sockets.in(room);\n    }\n    /**\n     * Excludes a room when emitting.\n     *\n     * @example\n     * // the \"foo\" event will be broadcast to all connected clients, except the ones that are in the \"room-101\" room\n     * io.except(\"room-101\").emit(\"foo\", \"bar\");\n     *\n     * // with an array of rooms\n     * io.except([\"room-101\", \"room-102\"]).emit(\"foo\", \"bar\");\n     *\n     * // with multiple chained calls\n     * io.except(\"room-101\").except(\"room-102\").emit(\"foo\", \"bar\");\n     *\n     * @param room - a room, or an array of rooms\n     * @return a new {@link BroadcastOperator} instance for chaining\n     */\n    except(room) {\n        return this.sockets.except(room);\n    }\n    /**\n     * Emits an event and waits for an acknowledgement from all clients.\n     *\n     * @example\n     * try {\n     *   const responses = await io.timeout(1000).emitWithAck(\"some-event\");\n     *   console.log(responses); // one response per client\n     * } catch (e) {\n     *   // some clients did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when all clients have acknowledged the event\n     */\n    emitWithAck(ev, ...args) {\n        return this.sockets.emitWithAck(ev, ...args);\n    }\n    /**\n     * Sends a `message` event to all clients.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * io.send(\"hello\");\n     *\n     * // this is equivalent to\n     * io.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        this.sockets.emit(\"message\", ...args);\n        return this;\n    }\n    /**\n     * Sends a `message` event to all clients. Alias of {@link send}.\n     *\n     * @return self\n     */\n    write(...args) {\n        this.sockets.emit(\"message\", ...args);\n        return this;\n    }\n    /**\n     * Sends a message to the other Socket.IO servers of the cluster.\n     *\n     * @example\n     * io.serverSideEmit(\"hello\", \"world\");\n     *\n     * io.on(\"hello\", (arg1) => {\n     *   console.log(arg1); // prints \"world\"\n     * });\n     *\n     * // acknowledgements (without binary content) are supported too:\n     * io.serverSideEmit(\"ping\", (err, responses) => {\n     *  if (err) {\n     *     // some servers did not acknowledge the event in the given delay\n     *   } else {\n     *     console.log(responses); // one response per server (except the current one)\n     *   }\n     * });\n     *\n     * io.on(\"ping\", (cb) => {\n     *   cb(\"pong\");\n     * });\n     *\n     * @param ev - the event name\n     * @param args - an array of arguments, which may include an acknowledgement callback at the end\n     */\n    serverSideEmit(ev, ...args) {\n        return this.sockets.serverSideEmit(ev, ...args);\n    }\n    /**\n     * Sends a message and expect an acknowledgement from the other Socket.IO servers of the cluster.\n     *\n     * @example\n     * try {\n     *   const responses = await io.serverSideEmitWithAck(\"ping\");\n     *   console.log(responses); // one response per server (except the current one)\n     * } catch (e) {\n     *   // some servers did not acknowledge the event in the given delay\n     * }\n     *\n     * @param ev - the event name\n     * @param args - an array of arguments\n     *\n     * @return a Promise that will be fulfilled when all servers have acknowledged the event\n     */\n    serverSideEmitWithAck(ev, ...args) {\n        return this.sockets.serverSideEmitWithAck(ev, ...args);\n    }\n    /**\n     * Gets a list of socket ids.\n     *\n     * @deprecated this method will be removed in the next major release, please use {@link Server#serverSideEmit} or\n     * {@link Server#fetchSockets} instead.\n     */\n    allSockets() {\n        return this.sockets.allSockets();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * io.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return a new {@link BroadcastOperator} instance for chaining\n     */\n    compress(compress) {\n        return this.sockets.compress(compress);\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event data may be lost if the client is not ready to\n     * receive messages (because of network slowness or other issues, or because they’re connected through long polling\n     * and is in the middle of a request-response cycle).\n     *\n     * @example\n     * io.volatile.emit(\"hello\"); // the clients may or may not receive it\n     *\n     * @return a new {@link BroadcastOperator} instance for chaining\n     */\n    get volatile() {\n        return this.sockets.volatile;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event data will only be broadcast to the current node.\n     *\n     * @example\n     * // the “foo” event will be broadcast to all connected clients on this node\n     * io.local.emit(\"foo\", \"bar\");\n     *\n     * @return a new {@link BroadcastOperator} instance for chaining\n     */\n    get local() {\n        return this.sockets.local;\n    }\n    /**\n     * Adds a timeout in milliseconds for the next operation.\n     *\n     * @example\n     * io.timeout(1000).emit(\"some-event\", (err, responses) => {\n     *   if (err) {\n     *     // some clients did not acknowledge the event in the given delay\n     *   } else {\n     *     console.log(responses); // one response per client\n     *   }\n     * });\n     *\n     * @param timeout\n     */\n    timeout(timeout) {\n        return this.sockets.timeout(timeout);\n    }\n    /**\n     * Returns the matching socket instances.\n     *\n     * Note: this method also works within a cluster of multiple Socket.IO servers, with a compatible {@link Adapter}.\n     *\n     * @example\n     * // return all Socket instances\n     * const sockets = await io.fetchSockets();\n     *\n     * // return all Socket instances in the \"room1\" room\n     * const sockets = await io.in(\"room1\").fetchSockets();\n     *\n     * for (const socket of sockets) {\n     *   console.log(socket.id);\n     *   console.log(socket.handshake);\n     *   console.log(socket.rooms);\n     *   console.log(socket.data);\n     *\n     *   socket.emit(\"hello\");\n     *   socket.join(\"room1\");\n     *   socket.leave(\"room2\");\n     *   socket.disconnect();\n     * }\n     */\n    fetchSockets() {\n        return this.sockets.fetchSockets();\n    }\n    /**\n     * Makes the matching socket instances join the specified rooms.\n     *\n     * Note: this method also works within a cluster of multiple Socket.IO servers, with a compatible {@link Adapter}.\n     *\n     * @example\n     *\n     * // make all socket instances join the \"room1\" room\n     * io.socketsJoin(\"room1\");\n     *\n     * // make all socket instances in the \"room1\" room join the \"room2\" and \"room3\" rooms\n     * io.in(\"room1\").socketsJoin([\"room2\", \"room3\"]);\n     *\n     * @param room - a room, or an array of rooms\n     */\n    socketsJoin(room) {\n        return this.sockets.socketsJoin(room);\n    }\n    /**\n     * Makes the matching socket instances leave the specified rooms.\n     *\n     * Note: this method also works within a cluster of multiple Socket.IO servers, with a compatible {@link Adapter}.\n     *\n     * @example\n     * // make all socket instances leave the \"room1\" room\n     * io.socketsLeave(\"room1\");\n     *\n     * // make all socket instances in the \"room1\" room leave the \"room2\" and \"room3\" rooms\n     * io.in(\"room1\").socketsLeave([\"room2\", \"room3\"]);\n     *\n     * @param room - a room, or an array of rooms\n     */\n    socketsLeave(room) {\n        return this.sockets.socketsLeave(room);\n    }\n    /**\n     * Makes the matching socket instances disconnect.\n     *\n     * Note: this method also works within a cluster of multiple Socket.IO servers, with a compatible {@link Adapter}.\n     *\n     * @example\n     * // make all socket instances disconnect (the connections might be kept alive for other namespaces)\n     * io.disconnectSockets();\n     *\n     * // make all socket instances in the \"room1\" room disconnect and close the underlying connections\n     * io.in(\"room1\").disconnectSockets(true);\n     *\n     * @param close - whether to close the underlying connection\n     */\n    disconnectSockets(close = false) {\n        return this.sockets.disconnectSockets(close);\n    }\n}\nexports.Server = Server;\n/**\n * Expose main namespace (/).\n */\nconst emitterMethods = Object.keys(events_1.EventEmitter.prototype).filter(function (key) {\n    return typeof events_1.EventEmitter.prototype[key] === \"function\";\n});\nemitterMethods.forEach(function (fn) {\n    Server.prototype[fn] = function () {\n        return this.sockets[fn].apply(this.sockets, arguments);\n    };\n});\nmodule.exports = (srv, opts) => new Server(srv, opts);\nmodule.exports.Server = Server;\nmodule.exports.Namespace = namespace_1.Namespace;\nmodule.exports.Socket = socket_1.Socket;\nvar socket_2 = require(\"./socket\");\n"],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;EACIkG,EAAEA,CAACC,IAAI,EAAE;IACL,OAAO,IAAI,CAAC/G,OAAO,CAAC8G,EAAE,CAACC,IAAI,CAAC;EAChC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,EAAEA,CAACD,IAAI,EAAE;IACL,OAAO,IAAI,CAAC/G,OAAO,CAACgH,EAAE,CAACD,IAAI,CAAC;EAChC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIE,MAAMA,CAACF,IAAI,EAAE;IACT,OAAO,IAAI,CAAC/G,OAAO,CAACiH,MAAM,CAACF,IAAI,CAAC;EACpC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIG,WAAWA,CAACC,EAAE,EAAE,GAAGC,IAAI,EAAE;IACrB,OAAO,IAAI,CAACpH,OAAO,CAACkH,WAAW,CAACC,EAAE,EAAE,GAAGC,IAAI,CAAC;EAChD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,IAAIA,CAAC,GAAGD,IAAI,EAAE;IACV,IAAI,CAACpH,OAAO,CAACsH,IAAI,CAAC,SAAS,EAAE,GAAGF,IAAI,CAAC;IACrC,OAAO,IAAI;EACf;EACA;AACJ;AACA;AACA;AACA;EACIG,KAAKA,CAAC,GAAGH,IAAI,EAAE;IACX,IAAI,CAACpH,OAAO,CAACsH,IAAI,CAAC,SAAS,EAAE,GAAGF,IAAI,CAAC;IACrC,OAAO,IAAI;EACf;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACII,cAAcA,CAACL,EAAE,EAAE,GAAGC,IAAI,EAAE;IACxB,OAAO,IAAI,CAACpH,OAAO,CAACwH,cAAc,CAACL,EAAE,EAAE,GAAGC,IAAI,CAAC;EACnD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIK,qBAAqBA,CAACN,EAAE,EAAE,GAAGC,IAAI,EAAE;IAC/B,OAAO,IAAI,CAACpH,OAAO,CAACyH,qBAAqB,CAACN,EAAE,EAAE,GAAGC,IAAI,CAAC;EAC1D;EACA;AACJ;AACA;AACA;AACA;AACA;EACIM,UAAUA,CAAA,EAAG;IACT,OAAO,IAAI,CAAC1H,OAAO,CAAC0H,UAAU,CAAC,CAAC;EACpC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,QAAQA,CAACA,QAAQ,EAAE;IACf,OAAO,IAAI,CAAC3H,OAAO,CAAC2H,QAAQ,CAACA,QAAQ,CAAC;EAC1C;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,IAAIC,QAAQA,CAAA,EAAG;IACX,OAAO,IAAI,CAAC5H,OAAO,CAAC4H,QAAQ;EAChC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,IAAIC,KAAKA,CAAA,EAAG;IACR,OAAO,IAAI,CAAC7H,OAAO,CAAC6H,KAAK;EAC7B;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,OAAOA,CAACA,OAAO,EAAE;IACb,OAAO,IAAI,CAAC9H,OAAO,CAAC8H,OAAO,CAACA,OAAO,CAAC;EACxC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,YAAYA,CAAA,EAAG;IACX,OAAO,IAAI,CAAC/H,OAAO,CAAC+H,YAAY,CAAC,CAAC;EACtC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,WAAWA,CAACjB,IAAI,EAAE;IACd,OAAO,IAAI,CAAC/G,OAAO,CAACgI,WAAW,CAACjB,IAAI,CAAC;EACzC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIkB,YAAYA,CAAClB,IAAI,EAAE;IACf,OAAO,IAAI,CAAC/G,OAAO,CAACiI,YAAY,CAAClB,IAAI,CAAC;EAC1C;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACImB,iBAAiBA,CAACzB,KAAK,GAAG,KAAK,EAAE;IAC7B,OAAO,IAAI,CAACzG,OAAO,CAACkI,iBAAiB,CAACzB,KAAK,CAAC;EAChD;AACJ;AACA3J,OAAO,CAACG,MAAM,GAAGA,MAAM;AACvB;AACA;AACA;AACA,MAAMkL,cAAc,GAAG9M,MAAM,CAAC0F,IAAI,CAACpD,QAAQ,CAACyK,YAAY,CAAC1L,SAAS,CAAC,CAAC2L,MAAM,CAAC,UAAUC,GAAG,EAAE;EACtF,OAAO,OAAO3K,QAAQ,CAACyK,YAAY,CAAC1L,SAAS,CAAC4L,GAAG,CAAC,KAAK,UAAU;AACrE,CAAC,CAAC;AACFH,cAAc,CAACI,OAAO,CAAC,UAAU3H,EAAE,EAAE;EACjC3D,MAAM,CAACP,SAAS,CAACkE,EAAE,CAAC,GAAG,YAAY;IAC/B,OAAO,IAAI,CAACZ,OAAO,CAACY,EAAE,CAAC,CAAC4H,KAAK,CAAC,IAAI,CAACxI,OAAO,EAAEM,SAAS,CAAC;EAC1D,CAAC;AACL,CAAC,CAAC;AACFmI,MAAM,CAAC3L,OAAO,GAAG,CAAC8B,GAAG,EAAEC,IAAI,KAAK,IAAI5B,MAAM,CAAC2B,GAAG,EAAEC,IAAI,CAAC;AACrD4J,MAAM,CAAC3L,OAAO,CAACG,MAAM,GAAGA,MAAM;AAC9BwL,MAAM,CAAC3L,OAAO,CAACC,SAAS,GAAGa,WAAW,CAACb,SAAS;AAChD0L,MAAM,CAAC3L,OAAO,CAACE,MAAM,GAAGiB,QAAQ,CAACjB,MAAM;AACvC,IAAI0L,QAAQ,GAAGvL,OAAO,CAAC,UAAU,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}