{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.JSONP = void 0;\nconst polling_1 = require(\"./polling\");\nconst qs = require(\"querystring\");\nconst rDoubleSlashes = /\\\\\\\\n/g;\nconst rSlashes = /(\\\\)?\\\\n/g;\nclass JSONP extends polling_1.Polling {\n  /**\n   * JSON-P polling transport.\n   *\n   * @api public\n   */\n  constructor(req) {\n    super(req);\n    this.head = \"___eio[\" + (req._query.j || \"\").replace(/[^0-9]/g, \"\") + \"](\";\n    this.foot = \");\";\n  }\n  /**\n   * Handles incoming data.\n   * Due to a bug in \\n handling by browsers, we expect a escaped string.\n   *\n   * @api private\n   */\n  onData(data) {\n    // we leverage the qs module so that we get built-in DoS protection\n    // and the fast alternative to decodeURIComponent\n    data = qs.parse(data).d;\n    if (\"string\" === typeof data) {\n      // client will send already escaped newlines as \\\\\\\\n and newlines as \\\\n\n      // \\\\n must be replaced with \\n and \\\\\\\\n with \\\\n\n      data = data.replace(rSlashes, function (match, slashes) {\n        return slashes ? match : \"\\n\";\n      });\n      super.onData(data.replace(rDoubleSlashes, \"\\\\n\"));\n    }\n  }\n  /**\n   * Performs the write.\n   *\n   * @api private\n   */\n  doWrite(data, options, callback) {\n    // we must output valid javascript, not valid json\n    // see: http://timelessrepo.com/json-isnt-a-javascript-subset\n    const js = JSON.stringify(data).replace(/\\u2028/g, \"\\\\u2028\").replace(/\\u2029/g, \"\\\\u2029\");\n    // prepare response\n    data = this.head + js + this.foot;\n    super.doWrite(data, options, callback);\n  }\n}\nexports.JSONP = JSONP;","map":{"version":3,"names":["Object","defineProperty","exports","value","JSONP","polling_1","require","qs","rDoubleSlashes","rSlashes","Polling","constructor","req","head","_query","j","replace","foot","onData","data","parse","d","match","slashes","doWrite","options","callback","js","JSON","stringify"],"sources":["C:/Users/sanjeevi/Desktop/chatapp/chatapp_frontend/node_modules/engine.io/build/transports/polling-jsonp.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JSONP = void 0;\nconst polling_1 = require(\"./polling\");\nconst qs = require(\"querystring\");\nconst rDoubleSlashes = /\\\\\\\\n/g;\nconst rSlashes = /(\\\\)?\\\\n/g;\nclass JSONP extends polling_1.Polling {\n    /**\n     * JSON-P polling transport.\n     *\n     * @api public\n     */\n    constructor(req) {\n        super(req);\n        this.head = \"___eio[\" + (req._query.j || \"\").replace(/[^0-9]/g, \"\") + \"](\";\n        this.foot = \");\";\n    }\n    /**\n     * Handles incoming data.\n     * Due to a bug in \\n handling by browsers, we expect a escaped string.\n     *\n     * @api private\n     */\n    onData(data) {\n        // we leverage the qs module so that we get built-in DoS protection\n        // and the fast alternative to decodeURIComponent\n        data = qs.parse(data).d;\n        if (\"string\" === typeof data) {\n            // client will send already escaped newlines as \\\\\\\\n and newlines as \\\\n\n            // \\\\n must be replaced with \\n and \\\\\\\\n with \\\\n\n            data = data.replace(rSlashes, function (match, slashes) {\n                return slashes ? match : \"\\n\";\n            });\n            super.onData(data.replace(rDoubleSlashes, \"\\\\n\"));\n        }\n    }\n    /**\n     * Performs the write.\n     *\n     * @api private\n     */\n    doWrite(data, options, callback) {\n        // we must output valid javascript, not valid json\n        // see: http://timelessrepo.com/json-isnt-a-javascript-subset\n        const js = JSON.stringify(data)\n            .replace(/\\u2028/g, \"\\\\u2028\")\n            .replace(/\\u2029/g, \"\\\\u2029\");\n        // prepare response\n        data = this.head + js + this.foot;\n        super.doWrite(data, options, callback);\n    }\n}\nexports.JSONP = JSONP;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,KAAK,GAAG,KAAK,CAAC;AACtB,MAAMC,SAAS,GAAGC,OAAO,CAAC,WAAW,CAAC;AACtC,MAAMC,EAAE,GAAGD,OAAO,CAAC,aAAa,CAAC;AACjC,MAAME,cAAc,GAAG,QAAQ;AAC/B,MAAMC,QAAQ,GAAG,WAAW;AAC5B,MAAML,KAAK,SAASC,SAAS,CAACK,OAAO,CAAC;EAClC;AACJ;AACA;AACA;AACA;EACIC,WAAWA,CAACC,GAAG,EAAE;IACb,KAAK,CAACA,GAAG,CAAC;IACV,IAAI,CAACC,IAAI,GAAG,SAAS,GAAG,CAACD,GAAG,CAACE,MAAM,CAACC,CAAC,IAAI,EAAE,EAAEC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,GAAG,IAAI;IAC1E,IAAI,CAACC,IAAI,GAAG,IAAI;EACpB;EACA;AACJ;AACA;AACA;AACA;AACA;EACIC,MAAMA,CAACC,IAAI,EAAE;IACT;IACA;IACAA,IAAI,GAAGZ,EAAE,CAACa,KAAK,CAACD,IAAI,CAAC,CAACE,CAAC;IACvB,IAAI,QAAQ,KAAK,OAAOF,IAAI,EAAE;MAC1B;MACA;MACAA,IAAI,GAAGA,IAAI,CAACH,OAAO,CAACP,QAAQ,EAAE,UAAUa,KAAK,EAAEC,OAAO,EAAE;QACpD,OAAOA,OAAO,GAAGD,KAAK,GAAG,IAAI;MACjC,CAAC,CAAC;MACF,KAAK,CAACJ,MAAM,CAACC,IAAI,CAACH,OAAO,CAACR,cAAc,EAAE,KAAK,CAAC,CAAC;IACrD;EACJ;EACA;AACJ;AACA;AACA;AACA;EACIgB,OAAOA,CAACL,IAAI,EAAEM,OAAO,EAAEC,QAAQ,EAAE;IAC7B;IACA;IACA,MAAMC,EAAE,GAAGC,IAAI,CAACC,SAAS,CAACV,IAAI,CAAC,CAC1BH,OAAO,CAAC,SAAS,EAAE,SAAS,CAAC,CAC7BA,OAAO,CAAC,SAAS,EAAE,SAAS,CAAC;IAClC;IACAG,IAAI,GAAG,IAAI,CAACN,IAAI,GAAGc,EAAE,GAAG,IAAI,CAACV,IAAI;IACjC,KAAK,CAACO,OAAO,CAACL,IAAI,EAAEM,OAAO,EAAEC,QAAQ,CAAC;EAC1C;AACJ;AACAxB,OAAO,CAACE,KAAK,GAAGA,KAAK"},"metadata":{},"sourceType":"script","externalDependencies":[]}